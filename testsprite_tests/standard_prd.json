{
  "meta": {
    "project": "PideAI Restaurant Ordering Platform",
    "date": "2025-12-10",
    "prepared_by": "Generated by AI"
  },
  "product_overview": "PideAI Restaurant Ordering Platform is a multi-tenant food ordering SaaS platform offering subdomain-based store routing that supports delivery, pickup, and digital menu operating modes. It enables restaurants to manage menus, orders, drivers, promotions, payments, and analytics with real-time order tracking and advanced integrations including WhatsApp notifications and AI-powered features.",
  "core_goals": [
    "Provide a scalable multi-tenant platform allowing restaurants to operate independently via subdomains",
    "Support flexible order modes: delivery, pickup, and digital menu only",
    "Enable real-time order and delivery tracking with driver GPS integration",
    "Facilitate efficient store management with comprehensive admin dashboards",
    "Integrate automated WhatsApp notifications and live chat support",
    "Offer in-depth analytics and reporting to optimize business performance",
    "Implement subscription plans with feature gating and usage tracking",
    "Ensure secure authentication, data privacy, and high availability"
  ],
  "key_features": [
    "Multi-tenant architecture with subdomain-based routing and data isolation via RLS",
    "Product catalog management with categories, menu items, and customizable extras",
    "Shopping cart with localStorage persistence supporting product extras",
    "Checkout flow with multi-step validation, coupon application, and order creation",
    "Real-time order notifications and status updates powered by Supabase Realtime",
    "Delivery management with zones, driver assignments, GPS tracking, photo & signature proof",
    "Admin dashboard for managing orders, customers, promotions, payments, and store settings",
    "WhatsApp integration for order notifications and promotional campaigns",
    "Driver PWA with authentication, delivery management, and real-time tracking",
    "User authentication with email verification and password reset",
    "Analytics integration with PostHog for tracking funnel, abandoned carts, and sales",
    "AI-powered product photo enhancement with credit-based system",
    "Localization support including Spanish language and dual currency with exchange rate updates",
    "Live chat support via Chatwoot embedded in the admin interface",
    "Subscription and feature gating system with usage monitoring"
  ],
  "user_flow_summary": [
    "Customer browsing store via subdomain, viewing catalog and product details",
    "Adding products with extras to cart and managing cart contents",
    "Proceeding through checkout steps: info input, delivery or pickup selection, payment method choice, order review",
    "Order confirmation and receiving WhatsApp notification with real-time tracking access",
    "Store owner onboarding: creating store, configuring settings, adding categories and products",
    "Managing orders with real-time notifications, updating status, assigning drivers",
    "Drivers using PWA to authenticate, toggle availability, receive delivery assignments, update delivery status, and capture delivery proof",
    "Admins managing multiple stores, monitoring platform analytics, subscription plans, and user access"
  ],
  "validation_criteria": [
    "Each store is uniquely identified by a functional subdomain with proper routing and 404 handling for invalid subdomains",
    "Store data is securely isolated using Postgres row-level security policies",
    "Only authenticated store owners can access administrative features and panels",
    "Ordering workflow validates customer data thoroughly with realtime feedback",
    "Shopping cart correctly persists and associates data per store session with uniqueness for product-extras combos",
    "Order notifications delivered in real-time with audio alert and status update consistency",
    "Delivery zones and pricing configured accurately, and driver assignments managed with live GPS tracking",
    "WhatsApp message templates correctly generate and send notifications with dynamic variables",
    "Subscription plans enforce feature limits and prompt upgrades as needed",
    "Analytics events are tracked correctly in PostHog and reflected in the dashboard",
    "Driver app authenticates properly and supports delivery workflow including proof capture",
    "Payment methods support multiple options including bank transfer with proof upload",
    "All uploaded images and proofs comply with file size and format requirements",
    "Platform maintains 99.5% uptime, with page load times under 2 seconds on 3G networks",
    "Security standards met for authentication, data encryption, and privacy policies"
  ],
  "code_summary": {
    "project_name": "PideAI Restaurant Ordering Platform",
    "project_description": "Multi-tenant food ordering platform with subdomain-based store routing, supporting delivery, pickup, and digital menu modes",
    "tech_stacks": {
      "frontend": {
        "framework": [
          "React 18.3.1",
          "TypeScript 5.8.3"
        ],
        "build_tools": [
          "Vite 5.4.19",
          "SWC"
        ],
        "routing": [
          "React Router DOM 6.30.1"
        ],
        "styling": [
          "Tailwind CSS 3.4.17",
          "PostCSS",
          "Autoprefixer"
        ],
        "ui_libraries": [
          "shadcn/ui",
          "Radix UI (30+ components)",
          "Lucide React 0.462.0",
          "Framer Motion 12.23.24",
          "Embla Carousel 8.6.0"
        ]
      },
      "backend": {
        "database": [
          "Supabase (PostgreSQL)"
        ],
        "auth": [
          "Supabase Auth"
        ],
        "realtime": [
          "Supabase Realtime"
        ],
        "state_management": [
          "TanStack Query 5.83.0",
          "Zustand 5.0.8"
        ]
      },
      "forms_validation": [
        "React Hook Form 7.61.1",
        "Zod 3.25.76"
      ],
      "analytics_monitoring": [
        "Sentry 10.29.0 (error tracking, performance monitoring)",
        "PostHog 1.298.0 (product analytics, session recording)"
      ],
      "charts_visualization": [
        "Recharts 2.15.4",
        "jsPDF 3.0.4"
      ],
      "maps_location": [
        "Leaflet 1.9.4",
        "React Leaflet 4.2.1",
        "Mapbox Polyline"
      ],
      "utilities": [
        "Date-fns 3.6.0",
        "Sonner 1.7.4 (toast notifications)",
        "React Helmet Async 2.0.5",
        "QR Code React 4.2.0"
      ],
      "development": [
        "ESLint 9.32.0",
        "Rollup Plugin Visualizer"
      ]
    },
    "main_features": {
      "ordering_system": [
        "Multi-tenant architecture with subdomain-based routing",
        "Product catalog with categories",
        "Shopping cart with localStorage persistence",
        "Product extras and customizations",
        "Checkout flow with order confirmation",
        "Real-time order tracking"
      ],
      "operating_modes": [
        "Delivery orders",
        "Pickup orders",
        "Digital menu only (no ordering)"
      ],
      "admin_dashboard": [
        "Orders management with status tracking",
        "Kitchen display system",
        "Categories management",
        "Menu items management (CRUD with extras)",
        "Customers management",
        "Promotions and coupons",
        "Delivery management with driver assignment",
        "Analytics and reporting with charts",
        "Payment settings configuration",
        "WhatsApp integration for notifications",
        "AI assistant features with credit system",
        "Subscription management",
        "Store settings (business hours, theme, pricing)"
      ],
      "platform_admin": [
        "Global metrics dashboard",
        "Store management across tenants",
        "Subscription and plan management",
        "Admin user management",
        "Payment validation",
        "PostHog analytics integration"
      ],
      "driver_app": [
        "PWA for delivery drivers",
        "GPS tracking with real-time location",
        "Photo capture for delivery proof",
        "Signature capture for confirmation",
        "Active delivery tracking"
      ],
      "customer_features": [
        "Product search and filtering",
        "Quick view modal",
        "Product detail pages",
        "Order history",
        "Email verification",
        "Password reset"
      ],
      "realtime_features": [
        "Live order notifications for store owners",
        "Audio notifications (configurable volume)",
        "Supabase realtime subscriptions",
        "Real-time order status updates"
      ],
      "payment_delivery": [
        "Payment on delivery",
        "Multiple payment methods",
        "Delivery zone management",
        "Dynamic delivery pricing",
        "WhatsApp message templates",
        "Minimum order configuration"
      ],
      "analytics": [
        "Order analytics with charts",
        "Customer analytics",
        "Abandoned cart tracking",
        "Catalog view tracking",
        "Product performance metrics",
        "A/B testing with PostHog experiments"
      ],
      "integrations": [
        "Sentry (error monitoring)",
        "PostHog (product analytics)",
        "Chatwoot (live chat support - admin only)",
        "WhatsApp (order notifications and campaigns)",
        "Leaflet/Maps (delivery tracking)"
      ],
      "localization": [
        "Spanish language support",
        "Dual currency support (original + VES)",
        "Automatic exchange rate updates",
        "Manual exchange rate override"
      ]
    },
    "key_components": {
      "pages": {
        "customer": [
          "Index (catalog)",
          "ProductDetail",
          "Checkout",
          "ConfirmOrder",
          "MyOrders",
          "TrackOrder",
          "Auth",
          "Welcome",
          "LandingPage"
        ],
        "admin": [
          "AdminDashboard",
          "AdminOrders",
          "AdminKitchen",
          "AdminAnalytics",
          "AdminCategories",
          "AdminMenuItems",
          "AdminCustomers",
          "AdminPromotions",
          "AdminCoupons",
          "AdminAI",
          "AdminWhatsApp",
          "AdminDelivery",
          "AdminSubscription",
          "StoreSettings"
        ],
        "platform_admin": [
          "PlatformDashboard",
          "StoresManager",
          "SubscriptionsManager",
          "PlansManager",
          "AdminsManager",
          "PaymentValidations",
          "PostHogAnalytics",
          "CatalogViewsManager"
        ],
        "driver": [
          "DriverLogin",
          "DriverDashboard",
          "ActiveDelivery"
        ]
      },
      "contexts": [
        "StoreContext (store state, subdomain routing, ownership)",
        "CartContext (shopping cart with localStorage)"
      ],
      "hooks": [
        "useStoreStatus",
        "useStoreTheme",
        "useOrderNotifications",
        "useChatwoot",
        "usePostHog",
        "useCartTotals",
        "usePaymentMethods",
        "useCoupons",
        "usePromotions",
        "useWhatsAppTemplates",
        "useWhatsAppCampaigns",
        "useAICredits",
        "useSubscription",
        "useAnalytics",
        "useOrderTracking",
        "useDeliveryTracking",
        "useDrivers",
        "useExchangeRate",
        "usePlatformAdmin",
        "usePostHogMetrics",
        "useViewLimitStatus"
      ],
      "database_tables": [
        "stores",
        "categories",
        "menu_items",
        "orders",
        "customers",
        "delivery_zones",
        "product_extras",
        "payment_methods",
        "store_hours",
        "subscriptions",
        "plans",
        "drivers",
        "coupons",
        "promotions"
      ]
    },
    "development_server": {
      "port": 8080,
      "command": "npm run dev"
    },
    "production_server": {
      "port": 3000,
      "build_command": "npm run build"
    }
  }
}
